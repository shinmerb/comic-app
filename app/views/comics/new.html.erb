<h1>新規登録</h1>

<%= form_with model: @comic do |f| %>
  <% if @comic.errors.any? %>
    <div id="error_explanation">
      <ul>
        <% @comic.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <ul>
    <li>
      <%= f.label :name, "漫画タイトル" %>
      <%= f.text_field :name %>
    </li>
    <li>
      <%= f.label :published_on, "出版日" %>
      <%= f.date_field :published_on %>
    </li>
    <li>
      <%= f.label :price, "値段" %>
      <%= f.number_field :price %>
    </li>
    <li>
      <%= f.label :publisher_id, "出版社" %>
      <%= f.collection_select :publisher_id, @publishers, :id, :name %>
    </li>
  </ul>
  <table border='1'>
    <thead>
      <tr>
        <th>著者</th>
        <th>選択</th>
      </tr>
    </thead>
    <tbody>
      <%= f.fields_for :comic_authors do |ff| %>
        <tr>
          <td>
            <%= ff.label :author_id, ff.object.author.name %>
          </td>
          <td>
            <%= ff.check_box :author_id, { checked: false },  ff.object.author_id, nil  %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= f.submit "登録" %>
<% end %>
